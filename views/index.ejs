<%- include('partials/header', {user: user}) -%>

<main class="container p-5 mt-20">
  <div class="flex items-center w-full justify-center gap-5">
    <div class="dropdown">
      <label tabindex="0" class="btn btn-outline btn-sm w-full">
        <span>Categories</span>
        <span class="fa fa-chevron-down pl-2"></span>
      </label>
      <ul
        tabindex="0"
        class="menu menu-compact dropdown-content mt-3 p-2 shadow bg-base-100 rounded-box w-52"
      >
        <li><a>All</a></li>
        <li><a>Phones</a></li>
        <li><a href="/profile">Laptops or Computers</a></li>
        <li><a>Home Appliances</a></li>
        <li><a>Pheripherals, Speakers, Headsets, etc.</a></li>
      </ul>
    </div>
    <div class="dropdown">
      <label tabindex="0" class="btn btn-outline btn-sm  w-full">
        <span>Sort by</span>
        <span class="fa fa-chevron-down pl-2"></span>
      </label>
      <ul
        tabindex="0"
        class="menu menu-compact dropdown-content mt-3 p-2 shadow bg-base-100 rounded-box w-52"
      >
        <li><a>Most Recent</a></li>
        <li><a href="/profile">Most Popular</a></li>
      </ul>
    </div>
    
    
  </div>
    <div class="row justify-content-center mt-5">
        <ul class="w-full flex flex-col items-center">
          <% for(var i=0; i<posts.length; i++) {%>
            <li class="col-6 justify-content-between mt-5">
              <a href="/post/<%= posts[i]._id%>">
                <!-- <img class="img-fluid" src="<%= posts[i].image%>"> -->
              
              <div class="pl-5 card card-side bg-base-100 shadow-l flex-col items-center max-w-[50rem] lg:min-w-[50rem] md:min-w-[50rem]">
                <div class="flex gap-1 items-start">
                  <figure class="max-w-[5rem] pt-10"><img src="<%= posts[i].image%>" alt="Movie"/></figure>
                <div class="card-body">
                  <div class="flex justify-between">
                    <div class="flex gap-1 items-center">
                        <div><i class="fa fa-user"></i></div>
                        <h5 class="card-title text-sm"><%= users.find(e => e._id == String(posts[i].user)).userName %></h5>
                      </div>
                    <div>
                        <h5><%= String(posts[i].createdAt).slice(0, 10) %></h5>
                    </div>
                  </div>
                  
                  <div class="card-actions justify-start">
                    <!-- <button class="btn btn-ghost text-sm"><%= posts[i].category %></button> -->
                    <div class="badge badge-outline"><%= posts[i].category %></div> 
                  </div>
                  <div class="max-h-[6rem] overflow-hidden"><%- posts[i].description %><span>...</span></div>
                  
                </div>
                </div>
               
                <div class="flex justify-around w-full pb-2 pt-0 mt-o">
                    <div class="flex gap-2 items-center">
                        <form
                    class="col-1"
                    action="/post/likePost/<%= posts[i].id %>?_method=PUT"
                    method="POST"
                  >
                    <button class="btn btn-ghost fa fa-heart" type="submit"></button>
                  </form>
                  <h5><%= posts[i].likes %></h5>
                      </div>
                      <div class="flex gap-2 items-center">
                        <form
                    class="col-1"
                    action="/post/likePost/<%= posts[i].id %>?_method=PUT"
                    method="POST"
                  >
                    <button class="btn btn-ghost fa fa-comment" type="submit"></button>
                  </form>
                  <h5><%= posts[i].likes %></h5>
                      </div>
                      <div class="flex gap-2 items-center">
                        <form
                    class="col-1"
                    action="/post/likePost/<%= posts[i].id %>?_method=PUT"
                    method="POST"
                  >
                    <button class="btn btn-ghost fa fa-share" type="submit"></button>
                  </form>
                  
                      </div>
                  </div>
              </div>
            </a>
            </li>
          <% } %>
          </ul>
      </div>
      <a href="/create-a-post">
        <button class="btn btn-circle fixed bottom-10 right-10">
          <i class="fa fa-plus"></i>
        </button>
      </a>
</main>
    

<%- include('partials/footer') -%>